<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartCuisine – Keukenspiegel Assessment</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --color-bg-primary: #0c0a09;
            --color-bg-secondary: #1c1917;
            --color-bg-tertiary: #292524;
            --color-teal-dark: #7f1d1d;
            --color-teal: #c53030;
            --color-teal-light: #ef4444;
            --color-cyan: #f87171;
            --color-cyan-light: #fca5a5;
            --color-navy: #44403c;
            --color-silver: #d6d3d1;
            --color-silver-light: #e7e5e4;
            --color-white: #ffffff;
            --text-primary: #f5f5f4;
            --text-secondary: #a8a29e;
            --text-muted: #78716c;
            --gradient-primary: linear-gradient(135deg, #c53030 0%, #ef4444 100%);
            --gradient-secondary: linear-gradient(135deg, #292524 0%, #7f1d1d 100%);
            --glass-bg: rgba(12, 10, 9, 0.8);
            --glass-border: rgba(239, 68, 68, 0.15);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --font-primary: 'Rajdhani', sans-serif;
            --font-secondary: 'Exo 2', sans-serif;
            --transition-base: 0.3s ease;
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 16px;
            --radius-xl: 24px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background: url('bg-kitchen.png') center center / cover no-repeat fixed;
            background-color: var(--color-bg-primary);
            color: var(--text-primary);
            font-family: var(--font-secondary);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(12, 10, 9, 0.55);
            z-index: -1; pointer-events: none;
        }

        .quiz-container {
            width: 100%; max-width: 600px;
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-xl);
            box-shadow: var(--glass-shadow);
            padding: var(--space-2xl);
            margin: var(--space-md);
            position: relative; overflow: hidden;
            display: flex; flex-direction: column; align-items: center;
        }

        .progress-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: rgba(255,255,255,0.05);
            border-top-left-radius: var(--radius-xl);
            border-top-right-radius: var(--radius-xl);
        }
        .progress-bar {
            height: 100%; background: var(--gradient-primary);
            width: 0%; transition: width 0.4s cubic-bezier(0.25,1,0.5,1);
            box-shadow: 0 0 10px var(--color-teal);
        }

        .header {
            text-align: center; margin-bottom: var(--space-xl); width: 100%;
            display: flex; flex-direction: column; align-items: center;
            padding-top: var(--space-md);
        }
        .brand-logo {
            max-width: 200px; height: auto; margin-bottom: var(--space-md);
            border-radius: var(--radius-md);
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            border: 1px solid rgba(239,68,68,0.1);
        }
        .brand-title {
            font-family: var(--font-primary);
            font-size: 1.8rem; font-weight: 700;
            background: linear-gradient(135deg, var(--color-teal-light), var(--color-cyan), var(--color-silver-light));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; margin-bottom: var(--space-sm);
        }
        .subtitle {
            color: var(--text-secondary); font-size: 0.9rem;
            font-weight: 300; letter-spacing: 0.5px; min-height: 20px;
        }

        /* Steps */
        .step {
            width: 100%; opacity: 0; pointer-events: none; display: none;
            transform: translateY(20px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .step.active {
            opacity: 1; pointer-events: all;
            display: flex; flex-direction: column;
            transform: translateY(0);
        }
        .step.fade-out {
            opacity: 0; transform: translateY(-20px);
            pointer-events: none; transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .question-title {
            font-family: var(--font-primary);
            font-size: 1.5rem; font-weight: 600;
            margin-bottom: var(--space-lg);
            text-align: center; color: var(--color-white); line-height: 1.3;
        }
        .question-desc {
            text-align: center; color: var(--text-secondary);
            margin-bottom: var(--space-xl); font-size: 0.95rem; line-height: 1.5;
        }

        /* Option buttons */
        .options-grid {
            display: flex; flex-direction: column; gap: var(--space-sm);
        }
        .option-btn {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--glass-border);
            color: var(--text-primary); padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md); cursor: pointer;
            font-family: var(--font-secondary); font-size: 0.95rem;
            text-align: left; transition: all var(--transition-base);
            display: flex; align-items: center; justify-content: space-between;
        }
        .option-btn:hover {
            background: rgba(239,68,68,0.1);
            border-color: var(--color-teal-light);
            transform: translateX(5px);
        }
        .option-btn.selected {
            background: rgba(239,68,68,0.15);
            border-color: var(--color-cyan);
        }

        /* Checkbox options */
        .checkbox-grid { display: flex; flex-direction: column; gap: var(--space-sm); }
        .checkbox-btn {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--glass-border);
            color: var(--text-primary); padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md); cursor: pointer;
            font-family: var(--font-secondary); font-size: 0.95rem;
            text-align: left; transition: all var(--transition-base);
            display: flex; align-items: center; gap: var(--space-md);
        }
        .checkbox-btn:hover {
            background: rgba(239,68,68,0.1);
            border-color: var(--color-teal-light);
        }
        .checkbox-btn.checked {
            background: rgba(239,68,68,0.15);
            border-color: var(--color-cyan);
        }
        .check-icon {
            width: 22px; height: 22px; border-radius: var(--radius-sm);
            border: 2px solid var(--text-muted); display: flex;
            align-items: center; justify-content: center;
            transition: all var(--transition-base); flex-shrink: 0;
        }
        .checkbox-btn.checked .check-icon {
            background: var(--gradient-primary); border-color: var(--color-teal);
        }
        .check-icon svg { opacity: 0; transition: opacity 0.2s ease; }
        .checkbox-btn.checked .check-icon svg { opacity: 1; }

        /* Input fields */
        .input-group { margin-bottom: var(--space-md); }
        .input-label {
            display: block; color: var(--text-secondary);
            font-size: 0.85rem; margin-bottom: var(--space-xs);
            font-weight: 400;
        }
        .input-field {
            width: 100%; padding: var(--space-md);
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            color: var(--color-white);
            font-family: var(--font-secondary); font-size: 1rem;
            outline: none; transition: var(--transition-base);
        }
        .input-field:focus {
            border-color: var(--color-cyan);
            box-shadow: 0 0 0 2px rgba(248,113,113,0.2);
        }
        .input-row {
            display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md);
        }
        .input-row-3 {
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: var(--space-md);
        }
        .input-suffix {
            position: relative;
        }
        .input-suffix .input-field { padding-right: 2.5rem; }
        .input-suffix::after {
            position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
            color: var(--text-muted); font-size: 0.9rem; pointer-events: none;
        }
        .suffix-euro::after { content: '€'; }
        .suffix-pct::after { content: '%'; }

        /* Range slider */
        .slider-group { margin-bottom: var(--space-lg); }
        .slider-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: var(--space-sm);
        }
        .slider-label { color: var(--text-secondary); font-size: 0.9rem; }
        .slider-value {
            font-family: var(--font-primary); font-size: 1.4rem;
            font-weight: 700; color: var(--color-teal-light);
            min-width: 2rem; text-align: right;
        }
        input[type="range"] {
            -webkit-appearance: none; width: 100%; height: 6px;
            background: rgba(255,255,255,0.1); border-radius: 3px;
            outline: none; cursor: pointer;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 22px; height: 22px;
            background: var(--gradient-primary); border-radius: 50%;
            cursor: pointer; border: 2px solid var(--color-white);
            box-shadow: 0 0 10px rgba(239,68,68,0.4);
        }
        input[type="range"]::-moz-range-thumb {
            width: 22px; height: 22px;
            background: var(--gradient-primary); border-radius: 50%;
            cursor: pointer; border: 2px solid var(--color-white);
        }

        /* Buttons */
        .action-btn {
            width: 100%; padding: var(--space-lg);
            background: var(--gradient-primary); border: none;
            border-radius: var(--radius-md);
            color: var(--color-white);
            font-family: var(--font-primary); font-weight: 700;
            font-size: 1.1rem; text-transform: uppercase;
            letter-spacing: 1px; cursor: pointer;
            transition: var(--transition-base);
            box-shadow: 0 4px 15px rgba(239,68,68,0.3);
            margin-top: var(--space-md);
            text-decoration: none; display: inline-block; text-align: center;
        }
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(248,113,113,0.4);
            filter: brightness(1.1);
        }
        .action-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .skip-btn {
            background: none; border: none; color: var(--text-muted);
            margin-top: var(--space-md); cursor: pointer;
            text-decoration: underline; font-size: 0.85rem;
            font-family: var(--font-secondary); align-self: center;
        }
        .skip-btn:hover { color: var(--text-secondary); }

        .error-msg {
            color: #ef4444; font-size: 0.85rem; margin-top: var(--space-sm);
            display: none; background: rgba(239,68,68,0.1);
            padding: var(--space-sm); border-radius: var(--radius-sm);
            border: 1px solid rgba(239,68,68,0.2);
        }

        /* Other container */
        .other-container {
            animation: slideDown 0.3s ease forwards;
            margin-top: var(--space-md); background: rgba(0,0,0,0.2);
            padding: var(--space-md); border-radius: var(--radius-md);
            border: 1px solid var(--glass-border);
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Results */
        .result-card {
            text-align: center; background: rgba(255,255,255,0.03);
            border-radius: var(--radius-lg); padding: var(--space-xl);
            margin-bottom: var(--space-xl); border: 1px solid var(--glass-border);
            width: 100%;
        }
        .score-circle {
            width: 120px; height: 120px; border-radius: 50%;
            background: var(--gradient-secondary);
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto var(--space-lg);
            border: 3px solid var(--color-teal);
            box-shadow: 0 0 20px rgba(185,28,28,0.4);
        }
        .score-number {
            font-family: var(--font-primary); font-size: 2.8rem;
            font-weight: 700; color: var(--color-white);
        }
        .result-title {
            font-size: 1.3rem; font-weight: 600;
            color: var(--color-teal-light); margin-bottom: var(--space-sm);
        }
        .result-text {
            color: var(--text-secondary); margin-bottom: var(--space-lg);
            line-height: 1.6; font-size: 0.95rem;
        }

        /* Score breakdown */
        .score-breakdown { margin-top: var(--space-lg); text-align: left; }
        .score-row {
            display: flex; align-items: center; gap: var(--space-md);
            margin-bottom: var(--space-md);
        }
        .score-row-label {
            flex: 0 0 140px; font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .score-bar-bg {
            flex: 1; height: 8px; background: rgba(255,255,255,0.08);
            border-radius: 4px; overflow: hidden;
        }
        .score-bar-fill {
            height: 100%; background: var(--gradient-primary);
            border-radius: 4px; transition: width 1s ease;
        }
        .score-row-value {
            flex: 0 0 40px; text-align: right;
            font-family: var(--font-primary); font-weight: 600;
            color: var(--color-teal-light); font-size: 0.95rem;
        }

        .upsell-box {
            background: linear-gradient(180deg, rgba(185,28,28,0.1), rgba(0,0,0,0));
            border: 1px solid rgba(239,68,68,0.2);
            border-radius: var(--radius-md); padding: var(--space-lg);
            margin-top: var(--space-lg); width: 100%;
        }
        .upsell-header {
            display: flex; align-items: center; justify-content: center;
            gap: var(--space-sm); margin-bottom: var(--space-sm);
            color: var(--color-cyan); font-family: var(--font-primary);
            font-weight: 600; text-transform: uppercase; font-size: 0.9rem;
        }

        .spinner {
            width: 20px; height: 20px;
            border: 3px solid rgba(0,0,0,0.1);
            border-top: 3px solid var(--color-white);
            border-radius: 50%; animation: spin 1s linear infinite;
            display: inline-block; margin-right: 8px; vertical-align: middle;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .lang-toggle {
            position: absolute; top: var(--space-lg); right: var(--space-lg);
            display: flex; gap: 2px; z-index: 10;
        }
        .lang-btn {
            background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border);
            color: var(--text-muted); padding: 4px 10px;
            font-family: var(--font-secondary); font-size: 0.75rem;
            cursor: pointer; transition: all var(--transition-base);
            text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px;
        }
        .lang-btn:first-child { border-radius: var(--radius-sm) 0 0 var(--radius-sm); }
        .lang-btn:last-child { border-radius: 0 var(--radius-sm) var(--radius-sm) 0; }
        .lang-btn.active {
            background: var(--gradient-primary); border-color: var(--color-teal);
            color: var(--color-white);
        }

        .hidden { display: none !important; }

        @media (max-width: 480px) {
            .quiz-container { padding: var(--space-lg); }
            .question-title { font-size: 1.25rem; }
            .input-row { grid-template-columns: 1fr; }
            .input-row-3 { grid-template-columns: 1fr; }
            .score-row-label { flex: 0 0 110px; font-size: 0.8rem; }
        }
    </style>
</head>
<body>

<div class="quiz-container">
    <div class="lang-toggle">
        <button class="lang-btn active" id="langNL" onclick="setLang('nl')">NL</button>
        <button class="lang-btn" id="langEN" onclick="setLang('en')">EN</button>
    </div>

    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="header" id="quizHeader">
        <img src="logo.png" alt="SmartCuisine Logo" class="brand-logo" onerror="this.style.display='none'">
        <div class="brand-title">SmartCuisine</div>
        <p class="subtitle" id="stepSubtitle">Keukenspiegel – Professionele Keuken Assessment</p>
    </div>

    <!-- ============ STAP 1: WELKOM ============ -->
    <div class="step active" id="step-1">
        <h2 class="question-title" data-t="s1_title">Ontdek het potentieel van uw keuken</h2>
        <p class="question-desc" data-t="s1_desc">
            Beantwoord een aantal vragen over uw keukenoperatie en ontvang direct uw Keukenspiegel Score met concrete verbeterpunten.
        </p>
        <button class="action-btn" onclick="goNext()" data-t="s1_btn">Start Assessment</button>
    </div>

    <!-- ============ STAP 2: NAW ============ -->
    <div class="step" id="step-2">
        <h2 class="question-title" data-t="s2_title">Uw gegevens</h2>
        <div class="input-group">
            <label class="input-label" data-t="lbl_bedrijf">Naam bedrijf</label>
            <input type="text" id="nawBedrijf" class="input-field" data-ph="ph_bedrijf" placeholder="Bijv. Restaurant De Gouden Leeuw">
        </div>
        <div class="input-group">
            <label class="input-label" data-t="lbl_contact">Contactpersoon</label>
            <input type="text" id="nawContact" class="input-field" data-ph="ph_contact" placeholder="Uw naam">
        </div>
        <div class="input-row">
            <div class="input-group">
                <label class="input-label" data-t="lbl_telefoon">Telefoonnummer</label>
                <input type="tel" id="nawTelefoon" class="input-field" data-ph="ph_telefoon" placeholder="06-12345678">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_plaats">Plaats</label>
                <input type="text" id="nawPlaats" class="input-field" data-ph="ph_plaats" placeholder="Amsterdam">
            </div>
        </div>
        <div id="nawError" class="error-msg" data-t="err_naw">Vul alle velden in om door te gaan.</div>
        <button class="action-btn" onclick="submitNaw()" data-t="btn_volgende">Volgende</button>
    </div>

    <!-- ============ STAP 3: TYPE RESTAURANT ============ -->
    <div class="step" id="step-3">
        <h2 class="question-title" data-t="s3_title">Wat voor type restaurant heeft u?</h2>
        <div class="options-grid">
            <button class="option-btn" onclick="pickOption('type','Eetcafé')"><span data-t="type_eetcafe">Eetcafé</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('type','Brasserie')"><span data-t="type_brasserie">Brasserie</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('type','Restaurant (à la carte)')"><span data-t="type_alacarte">Restaurant (à la carte)</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('type','Fine dining / gastronomisch')"><span data-t="type_finedining">Fine dining / gastronomisch</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('type','Afhaal- en bezorgrestaurant')"><span data-t="type_afhaal">Afhaal- en bezorgrestaurant</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('type','Fastfood / QSR')"><span data-t="type_fastfood">Fastfood / QSR</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('type','Internationaal / themarestaurant')"><span data-t="type_internationaal">Internationaal / themarestaurant</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('type','Lunchroom / koffiezaak')"><span data-t="type_lunchroom">Lunchroom / koffiezaak</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('type','Grand café')"><span data-t="type_grandcafe">Grand café</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('type','Hotelrestaurant')"><span data-t="type_hotel">Hotelrestaurant</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="showOther('type')"><span data-t="type_anders">Anders</span> <span style="color:var(--text-muted)">→</span></button>
        </div>
        <div id="otherType" class="other-container hidden">
            <input type="text" id="otherTypeInput" class="input-field" data-ph="ph_anders" placeholder="Specificeer uw type restaurant...">
            <button class="action-btn" onclick="confirmOther('type')" data-t="btn_volgende">Volgende</button>
        </div>
    </div>

    <!-- ============ STAP 4: ONTBIJT ============ -->
    <div class="step" id="step-4">
        <h2 class="question-title" data-t="s4_title">Ontbijt – Serveermomenten</h2>
        <p class="question-desc" data-t="s4_desc">Vul de gegevens in over uw ontbijtservice.</p>
        <div class="input-row-3">
            <div class="input-group">
                <label class="input-label" data-t="lbl_dagen">Dagen per week</label>
                <input type="number" id="ontbijtDagen" class="input-field" data-ph="ph_dagen" min="0" max="7" placeholder="0-7">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_gasten">Gasten per dag</label>
                <input type="number" id="ontbijtGasten" class="input-field" data-ph="ph_gasten" min="0" placeholder="Gem.">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_omzet_gast">Omzet per gast (€)</label>
                <input type="number" id="ontbijtOmzet" class="input-field" data-ph="ph_omzet" min="0" step="0.50" placeholder="Incl. BTW">
            </div>
        </div>
        <div id="ontbijtError" class="error-msg" data-t="err_meal">Vul alle velden in om door te gaan.</div>
        <button class="action-btn" onclick="submitMeal('ontbijt')" data-t="btn_volgende">Volgende</button>
        <button class="skip-btn" onclick="skipMeal('ontbijt')" data-t="skip_ontbijt">Wij serveren geen ontbijt – overslaan</button>
    </div>

    <!-- ============ STAP 5: LUNCH ============ -->
    <div class="step" id="step-5">
        <h2 class="question-title" data-t="s5_title">Lunch – Serveermomenten</h2>
        <p class="question-desc" data-t="s5_desc">Vul de gegevens in over uw lunchservice.</p>
        <div class="input-row-3">
            <div class="input-group">
                <label class="input-label" data-t="lbl_dagen">Dagen per week</label>
                <input type="number" id="lunchDagen" class="input-field" data-ph="ph_dagen" min="0" max="7" placeholder="0-7">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_gasten">Gasten per dag</label>
                <input type="number" id="lunchGasten" class="input-field" data-ph="ph_gasten" min="0" placeholder="Gem.">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_omzet_gast">Omzet per gast (€)</label>
                <input type="number" id="lunchOmzet" class="input-field" data-ph="ph_omzet" min="0" step="0.50" placeholder="Incl. BTW">
            </div>
        </div>
        <div id="lunchError" class="error-msg" data-t="err_meal">Vul alle velden in om door te gaan.</div>
        <button class="action-btn" onclick="submitMeal('lunch')" data-t="btn_volgende">Volgende</button>
        <button class="skip-btn" onclick="skipMeal('lunch')" data-t="skip_lunch">Wij serveren geen lunch – overslaan</button>
    </div>

    <!-- ============ STAP 6: DINER ============ -->
    <div class="step" id="step-6">
        <h2 class="question-title" data-t="s6_title">Diner – Serveermomenten</h2>
        <p class="question-desc" data-t="s6_desc">Vul de gegevens in over uw dinerservice.</p>
        <div class="input-row-3">
            <div class="input-group">
                <label class="input-label" data-t="lbl_dagen">Dagen per week</label>
                <input type="number" id="dinerDagen" class="input-field" data-ph="ph_dagen" min="0" max="7" placeholder="0-7">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_gasten">Gasten per dag</label>
                <input type="number" id="dinerGasten" class="input-field" data-ph="ph_gasten" min="0" placeholder="Gem.">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_omzet_gast">Omzet per gast (€)</label>
                <input type="number" id="dinerOmzet" class="input-field" data-ph="ph_omzet" min="0" step="0.50" placeholder="Incl. BTW">
            </div>
        </div>
        <div id="dinerError" class="error-msg" data-t="err_meal">Vul alle velden in om door te gaan.</div>
        <button class="action-btn" onclick="submitMeal('diner')" data-t="btn_volgende">Volgende</button>
        <button class="skip-btn" onclick="skipMeal('diner')" data-t="skip_diner">Wij serveren geen diner – overslaan</button>
    </div>

    <!-- ============ STAP 7: AANBOD ONTBIJT ============ -->
    <div class="step" id="step-7">
        <h2 class="question-title" data-t="s7_title">Wat biedt u aan bij het ontbijt?</h2>
        <div class="options-grid">
            <button class="option-btn" onclick="pickOption('ontbijtType','Ontbijtbuffet')"><span data-t="ontbijt_buffet">Ontbijtbuffet</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('ontbijtType','Fixed ontbijt')"><span data-t="ontbijt_fixed">Fixed ontbijt</span> <span style="color:var(--text-muted)">→</span></button>
            <button class="option-btn" onclick="pickOption('ontbijtType','À la carte ontbijt')"><span data-t="ontbijt_alacarte">À la carte ontbijt</span> <span style="color:var(--text-muted)">→</span></button>
        </div>
    </div>

    <!-- ============ STAP 8: AANBOD LUNCH & DINER ============ -->
    <div class="step" id="step-8">
        <h2 class="question-title" data-t="s8_title">Aanbod – Lunch & Diner</h2>
        <p class="question-desc" data-t="s8_desc">Geef een indicatie van uw menusamenstelling.</p>

        <p style="color:var(--color-cyan);font-weight:600;margin-bottom:var(--space-sm);font-size:0.9rem;" data-t="lbl_lunch_header">LUNCH</p>
        <div class="input-row">
            <div class="input-group">
                <label class="input-label" data-t="lbl_gerechten">Aantal à la carte gerechten</label>
                <input type="number" id="lunchGerechten" class="input-field" min="0" placeholder="0">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_gangen_lunch">Aantal gangen lunchmenu</label>
                <input type="number" id="lunchGangen" class="input-field" min="0" max="10" placeholder="0-10">
            </div>
        </div>

        <p style="color:var(--color-cyan);font-weight:600;margin:var(--space-lg) 0 var(--space-sm);font-size:0.9rem;" data-t="lbl_diner_header">DINER</p>
        <div class="input-row">
            <div class="input-group">
                <label class="input-label" data-t="lbl_gerechten">Aantal à la carte gerechten</label>
                <input type="number" id="dinerGerechten" class="input-field" min="0" placeholder="0">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_gangen_diner">Aantal gangen dinermenu</label>
                <input type="number" id="dinerGangen" class="input-field" min="0" max="10" placeholder="0-10">
            </div>
        </div>

        <p style="color:var(--color-cyan);font-weight:600;margin:var(--space-lg) 0 var(--space-sm);font-size:0.9rem;" data-t="lbl_banqueting_header">BANQUETING</p>
        <div class="input-group">
            <label class="input-label" data-t="lbl_banqueting">Aantal banquetingmenu's</label>
            <input type="number" id="banqueting" class="input-field" min="0" placeholder="0" style="max-width:200px;">
        </div>

        <div id="aanbodError" class="error-msg" data-t="err_aanbod">Vul alle velden in om door te gaan.</div>
        <button class="action-btn" onclick="submitAanbod()" data-t="btn_volgende">Volgende</button>
    </div>

    <!-- ============ STAP 9: VARIABELE KOSTEN ============ -->
    <div class="step" id="step-9">
        <h2 class="question-title" data-t="s9_title">Inzicht in variabele kosten</h2>
        <div class="input-row">
            <div class="input-group">
                <label class="input-label" data-t="lbl_brutomarge">Gem. brutomarge keukenproduct (%)</label>
                <input type="number" id="brutomarge" class="input-field" data-ph="ph_marge" min="0" max="100" placeholder="Bijv. 70">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_koks">Aantal koks (FTE)</label>
                <input type="number" id="aantalKoks" class="input-field" data-ph="ph_koks" min="0" step="0.5" placeholder="Bijv. 3">
            </div>
        </div>
        <div class="input-group">
            <label class="input-label" data-t="lbl_loonsom">Totale loonsom keuken per jaar (€)</label>
            <input type="number" id="loonsom" class="input-field" data-ph="ph_loonsom" min="0" placeholder="Bijv. 150000">
        </div>
        <div class="input-row">
            <div class="input-group">
                <label class="input-label" data-t="lbl_foodomzet">Totale foodomzet per jaar (€)</label>
                <input type="number" id="foodomzet" class="input-field" data-ph="ph_foodomzet" min="0" placeholder="Bijv. 500000">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_inkoop">Inkoopwaarde food per jaar (€)</label>
                <input type="number" id="inkoop" class="input-field" data-ph="ph_inkoop" min="0" placeholder="Bijv. 150000">
            </div>
        </div>
        <div class="input-row">
            <div class="input-group">
                <label class="input-label" data-t="lbl_leveranciers">Aantal leveranciers</label>
                <input type="number" id="leveranciers" class="input-field" data-ph="ph_leveranciers" min="0" placeholder="Bijv. 8">
            </div>
            <div class="input-group">
                <label class="input-label" data-t="lbl_leveringen">Leveringen per week</label>
                <input type="number" id="leveringen" class="input-field" data-ph="ph_leveringen" min="0" placeholder="Bijv. 5">
            </div>
        </div>
        <div id="kostenError" class="error-msg" data-t="err_kosten">Vul alle velden in om door te gaan.</div>
        <button class="action-btn" onclick="submitKosten()" data-t="btn_volgende">Volgende</button>
    </div>

    <!-- ============ STAP 10: SYSTEMATIEK ============ -->
    <div class="step" id="step-10">
        <h2 class="question-title" data-t="s10_title">Systematiek & Procedures</h2>
        <p class="question-desc" data-t="s10_desc">Welke van de volgende zaken heeft u geregeld?</p>
        <div class="checkbox-grid">
            <button class="checkbox-btn" onclick="toggleCheck(this,'recepturen')">
                <span class="check-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></span>
                <span data-t="chk_recepturen">Recepturen vastgelegd</span>
            </button>
            <button class="checkbox-btn" onclick="toggleCheck(this,'gecalculeerd')">
                <span class="check-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></span>
                <span data-t="chk_gecalculeerd">Alle gerechten zijn gecalculeerd</span>
            </button>
            <button class="checkbox-btn" onclick="toggleCheck(this,'miseenplace')">
                <span class="check-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></span>
                <span data-t="chk_miseenplace">Mise en place gepland o.b.v. prognose</span>
            </button>
            <button class="checkbox-btn" onclick="toggleCheck(this,'haccp')">
                <span class="check-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></span>
                <span data-t="chk_haccp">HACCP-plan of digitaal systeem aanwezig</span>
            </button>
            <button class="checkbox-btn" onclick="toggleCheck(this,'kassasysteem')">
                <span class="check-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></span>
                <span data-t="chk_kassasysteem">Geïntegreerd F&B kassasysteem</span>
            </button>
        </div>
        <button class="action-btn" onclick="goNext()" data-t="btn_volgende">Volgende</button>
    </div>

    <!-- ============ STAP 11: GASTTEVREDENHEID ============ -->
    <div class="step" id="step-11">
        <h2 class="question-title" data-t="s11_title">Gasttevredenheid</h2>
        <p class="question-desc" data-t="s11_desc">Beoordeel de volgende aspecten op een schaal van 1 tot 10.</p>

        <div class="slider-group">
            <div class="slider-header">
                <span class="slider-label" data-t="lbl_kwaliteit">Kwaliteit gerechten</span>
                <span class="slider-value" id="val-kwaliteit">5</span>
            </div>
            <input type="range" min="1" max="10" value="5" oninput="updateSlider('kwaliteit',this.value)">
        </div>
        <div class="slider-group">
            <div class="slider-header">
                <span class="slider-label" data-t="lbl_continuiteit">Continuïteit van het aanbod</span>
                <span class="slider-value" id="val-continuiteit">5</span>
            </div>
            <input type="range" min="1" max="10" value="5" oninput="updateSlider('continuiteit',this.value)">
        </div>
        <div class="slider-group">
            <div class="slider-header">
                <span class="slider-label" data-t="lbl_keuze">Keuze van menuitems</span>
                <span class="slider-value" id="val-keuze">5</span>
            </div>
            <input type="range" min="1" max="10" value="5" oninput="updateSlider('keuze',this.value)">
        </div>
        <div class="slider-group">
            <div class="slider-header">
                <span class="slider-label" data-t="lbl_snelheid">Snelheid van serveren</span>
                <span class="slider-value" id="val-snelheid">5</span>
            </div>
            <input type="range" min="1" max="10" value="5" oninput="updateSlider('snelheid',this.value)">
        </div>
        <button class="action-btn" onclick="goNext()" data-t="btn_volgende">Volgende</button>
    </div>

    <!-- ============ STAP 12: KEUKENTEAM ============ -->
    <div class="step" id="step-12">
        <h2 class="question-title" data-t="s12_title">Keukenteam</h2>

        <div class="slider-group">
            <div class="slider-header">
                <span class="slider-label" data-t="lbl_teamtevredenheid">Tevredenheid keukenteam</span>
                <span class="slider-value" id="val-teamtevredenheid">5</span>
            </div>
            <input type="range" min="1" max="10" value="5" oninput="updateSlider('teamtevredenheid',this.value)">
        </div>
        <div class="slider-group">
            <div class="slider-header">
                <span class="slider-label" data-t="lbl_samenwerking">Samenwerking keuken & bediening</span>
                <span class="slider-value" id="val-samenwerking">5</span>
            </div>
            <input type="range" min="1" max="10" value="5" oninput="updateSlider('samenwerking',this.value)">
        </div>
        <div class="slider-group">
            <div class="slider-header">
                <span class="slider-label" data-t="lbl_gastkennis">Kennis van wensen van de gast</span>
                <span class="slider-value" id="val-gastkennis">5</span>
            </div>
            <input type="range" min="1" max="10" value="5" oninput="updateSlider('gastkennis',this.value)">
        </div>

        <p style="color:var(--text-secondary);font-size:0.9rem;margin:var(--space-md) 0 var(--space-sm);" data-t="lbl_dienstverband">Hoe lang blijven koks gemiddeld in dienst?</p>
        <div class="options-grid">
            <button class="option-btn" onclick="pickDienstverband('< 6 maanden',this)"><span data-t="dv_6m">Minder dan 6 maanden</span></button>
            <button class="option-btn" onclick="pickDienstverband('6-12 maanden',this)"><span data-t="dv_12m">6 – 12 maanden</span></button>
            <button class="option-btn" onclick="pickDienstverband('1-2 jaar',this)"><span data-t="dv_2j">1 – 2 jaar</span></button>
            <button class="option-btn" onclick="pickDienstverband('> 2 jaar',this)"><span data-t="dv_2jplus">Meer dan 2 jaar</span></button>
        </div>
        <div id="teamError" class="error-msg" data-t="err_team">Selecteer hoe lang koks gemiddeld in dienst blijven.</div>
        <button class="action-btn" id="teamNextBtn" onclick="submitTeam()" data-t="btn_volgende" style="margin-top:var(--space-lg);">Volgende</button>
    </div>

    <!-- ============ STAP 13: EMAIL ============ -->
    <div class="step" id="step-13">
        <h2 class="question-title" data-t="s13_title">Waar mogen wij uw rapport naartoe sturen?</h2>
        <p class="question-desc" data-t="s13_desc">Vul uw e-mailadres in om direct uw Keukenspiegel Score te ontvangen.</p>
        <div class="input-group">
            <input type="email" id="emailInput" class="input-field" data-ph="ph_email" placeholder="naam@bedrijf.nl">
            <div id="emailError" class="error-msg" data-t="err_email">Vul een geldig e-mailadres in.</div>
        </div>
        <button class="action-btn" id="submitBtn" onclick="submitEmail()" data-t="btn_submit">Bekijk mijn resultaten</button>
    </div>

    <!-- ============ STAP 14: RESULTATEN ============ -->
    <div class="step" id="step-14">
        <div class="result-card">
            <div class="score-circle">
                <span class="score-number" id="scoreValue">0</span>
            </div>
            <h3 class="result-title" id="resultTitle">Berekenen...</h3>
            <p class="result-text" id="resultText">Even geduld terwijl we uw score berekenen...</p>

            <div class="score-breakdown">
                <div class="score-row">
                    <span class="score-row-label" data-t="lbl_systematiek">Systematiek</span>
                    <div class="score-bar-bg"><div class="score-bar-fill" id="bar-systematiek" style="width:0%"></div></div>
                    <span class="score-row-value" id="val-bar-systematiek">0</span>
                </div>
                <div class="score-row">
                    <span class="score-row-label" data-t="lbl_gasttevredenheid">Gasttevredenheid</span>
                    <div class="score-bar-bg"><div class="score-bar-fill" id="bar-gasttevredenheid" style="width:0%"></div></div>
                    <span class="score-row-value" id="val-bar-gasttevredenheid">0</span>
                </div>
                <div class="score-row">
                    <span class="score-row-label" data-t="lbl_keukenteam">Keukenteam</span>
                    <div class="score-bar-bg"><div class="score-bar-fill" id="bar-keukenteam" style="width:0%"></div></div>
                    <span class="score-row-value" id="val-bar-keukenteam">0</span>
                </div>
                <div class="score-row">
                    <span class="score-row-label" data-t="lbl_efficiency">Efficiency</span>
                    <div class="score-bar-bg"><div class="score-bar-fill" id="bar-efficiency" style="width:0%"></div></div>
                    <span class="score-row-value" id="val-bar-efficiency">0</span>
                </div>
            </div>
        </div>

        <div class="upsell-box">
            <div class="upsell-header">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                <span data-t="upsell_header">Aanbeveling</span>
            </div>
            <p id="upsellText" style="font-size:0.9rem;color:var(--color-silver-light);margin-bottom:var(--space-md);" data-t="upsell_text">
                Op basis van uw profiel kan Smart Cuisine uw keukenoperatie direct optimaliseren.
            </p>
            <a href="#" class="action-btn" id="ctaLink" data-t="btn_cta">Neem contact op</a>
        </div>

        <button onclick="location.reload()" style="background:none;border:none;color:var(--text-muted);margin-top:var(--space-xl);cursor:pointer;text-decoration:underline;font-size:0.85rem;" data-t="btn_restart">
            Assessment opnieuw doen
        </button>
    </div>
</div>

<script>
    /* ======== STATE ======== */
    const TOTAL_STEPS = 14;
    const FORMSPREE_ID = "xvzbkgpe";
    let currentStep = 1;

    const data = {
        bedrijf: '', contact: '', telefoon: '', plaats: '',
        type: '',
        ontbijt: { active: false, dagen: 0, gasten: 0, omzet: 0 },
        lunch:   { active: false, dagen: 0, gasten: 0, omzet: 0 },
        diner:   { active: false, dagen: 0, gasten: 0, omzet: 0 },
        ontbijtType: '',
        lunchGerechten: 0, lunchGangen: 0,
        dinerGerechten: 0, dinerGangen: 0,
        banqueting: 0,
        brutomarge: 0, aantalKoks: 0, loonsom: 0, foodomzet: 0, inkoop: 0,
        leveranciers: 0, leveringen: 0,
        systematiek: { recepturen: false, gecalculeerd: false, miseenplace: false, haccp: false, kassasysteem: false },
        kwaliteit: 5, continuiteit: 5, keuze: 5, snelheid: 5,
        teamtevredenheid: 5, samenwerking: 5, gastkennis: 5,
        dienstverband: '',
        email: ''
    };

    let currentLang = 'nl';
    let lastScores = null;

    const T = {
        nl: {
            subtitle_default: 'Keukenspiegel – Professionele Keuken Assessment',
            subtitle_last: 'Laatste stap', subtitle_result: 'Uw resultaat',
            subtitle_step: 'Stap {n} van {total}',
            s1_title: 'Ontdek het potentieel van uw keuken',
            s1_desc: 'Beantwoord een aantal vragen over uw keukenoperatie en ontvang direct uw Keukenspiegel Score met concrete verbeterpunten.',
            s1_btn: 'Start Assessment',
            s2_title: 'Uw gegevens',
            lbl_bedrijf: 'Naam bedrijf', lbl_contact: 'Contactpersoon',
            lbl_telefoon: 'Telefoonnummer', lbl_plaats: 'Plaats',
            ph_bedrijf: 'Bijv. Restaurant De Gouden Leeuw', ph_contact: 'Uw naam',
            ph_telefoon: '06-12345678', ph_plaats: 'Amsterdam',
            err_naw: 'Vul alle velden in om door te gaan.', btn_volgende: 'Volgende',
            s3_title: 'Wat voor type restaurant heeft u?',
            type_eetcafe: 'Eetcafé', type_brasserie: 'Brasserie',
            type_alacarte: 'Restaurant (à la carte)',
            type_finedining: 'Fine dining / gastronomisch',
            type_afhaal: 'Afhaal- en bezorgrestaurant', type_fastfood: 'Fastfood / QSR',
            type_internationaal: 'Internationaal / themarestaurant',
            type_lunchroom: 'Lunchroom / koffiezaak', type_grandcafe: 'Grand café',
            type_hotel: 'Hotelrestaurant', type_anders: 'Anders',
            ph_anders: 'Specificeer uw type restaurant...',
            s4_title: 'Ontbijt – Serveermomenten', s5_title: 'Lunch – Serveermomenten',
            s6_title: 'Diner – Serveermomenten',
            s4_desc: 'Vul de gegevens in over uw ontbijtservice.',
            s5_desc: 'Vul de gegevens in over uw lunchservice.',
            s6_desc: 'Vul de gegevens in over uw dinerservice.',
            lbl_dagen: 'Dagen per week', lbl_gasten: 'Gasten per dag',
            lbl_omzet_gast: 'Omzet per gast (€)',
            ph_dagen: '0-7', ph_gasten: 'Gem.', ph_omzet: 'Incl. BTW',
            err_meal: 'Vul alle velden in om door te gaan.',
            skip_ontbijt: 'Wij serveren geen ontbijt – overslaan',
            skip_lunch: 'Wij serveren geen lunch – overslaan',
            skip_diner: 'Wij serveren geen diner – overslaan',
            s7_title: 'Wat biedt u aan bij het ontbijt?',
            ontbijt_buffet: 'Ontbijtbuffet', ontbijt_fixed: 'Fixed ontbijt',
            ontbijt_alacarte: 'À la carte ontbijt',
            s8_title: 'Aanbod – Lunch & Diner',
            s8_desc: 'Geef een indicatie van uw menusamenstelling.',
            lbl_lunch_header: 'LUNCH', lbl_diner_header: 'DINER',
            lbl_banqueting_header: 'BANQUETING',
            lbl_gerechten: 'Aantal à la carte gerechten',
            lbl_gangen_lunch: 'Aantal gangen lunchmenu',
            lbl_gangen_diner: 'Aantal gangen dinermenu',
            lbl_banqueting: "Aantal banquetingmenu's",
            err_aanbod: 'Vul alle velden in om door te gaan.',
            s9_title: 'Inzicht in variabele kosten',
            lbl_brutomarge: 'Gem. brutomarge keukenproduct (%)',
            lbl_koks: 'Aantal koks (FTE)',
            lbl_loonsom: 'Totale loonsom keuken per jaar (€)',
            lbl_foodomzet: 'Totale foodomzet per jaar (€)',
            lbl_inkoop: 'Inkoopwaarde food per jaar (€)',
            lbl_leveranciers: 'Aantal leveranciers', lbl_leveringen: 'Leveringen per week',
            ph_marge: 'Bijv. 70', ph_koks: 'Bijv. 3', ph_loonsom: 'Bijv. 150000',
            ph_foodomzet: 'Bijv. 500000', ph_inkoop: 'Bijv. 150000',
            ph_leveranciers: 'Bijv. 8', ph_leveringen: 'Bijv. 5',
            err_kosten: 'Vul alle velden in om door te gaan.',
            s10_title: 'Systematiek & Procedures',
            s10_desc: 'Welke van de volgende zaken heeft u geregeld?',
            chk_recepturen: 'Recepturen vastgelegd',
            chk_gecalculeerd: 'Alle gerechten zijn gecalculeerd',
            chk_miseenplace: 'Mise en place gepland o.b.v. prognose',
            chk_haccp: 'HACCP-plan of digitaal systeem aanwezig',
            chk_kassasysteem: 'Geïntegreerd F&B kassasysteem',
            s11_title: 'Gasttevredenheid',
            s11_desc: 'Beoordeel de volgende aspecten op een schaal van 1 tot 10.',
            lbl_kwaliteit: 'Kwaliteit gerechten',
            lbl_continuiteit: 'Continuïteit van het aanbod',
            lbl_keuze: 'Keuze van menuitems', lbl_snelheid: 'Snelheid van serveren',
            s12_title: 'Keukenteam',
            lbl_teamtevredenheid: 'Tevredenheid keukenteam',
            lbl_samenwerking: 'Samenwerking keuken & bediening',
            lbl_gastkennis: 'Kennis van wensen van de gast',
            lbl_dienstverband: 'Hoe lang blijven koks gemiddeld in dienst?',
            dv_6m: 'Minder dan 6 maanden', dv_12m: '6 – 12 maanden',
            dv_2j: '1 – 2 jaar', dv_2jplus: 'Meer dan 2 jaar',
            err_team: 'Selecteer hoe lang koks gemiddeld in dienst blijven.',
            s13_title: 'Waar mogen wij uw rapport naartoe sturen?',
            s13_desc: 'Vul uw e-mailadres in om direct uw Keukenspiegel Score te ontvangen.',
            ph_email: 'naam@bedrijf.nl', err_email: 'Vul een geldig e-mailadres in.',
            btn_submit: 'Bekijk mijn resultaten',
            btn_sending: 'Verzenden...', btn_analyzing: 'Analyseren...',
            lbl_systematiek: 'Systematiek', lbl_gasttevredenheid: 'Gasttevredenheid',
            lbl_keukenteam: 'Keukenteam', lbl_efficiency: 'Efficiency',
            upsell_header: 'Aanbeveling',
            upsell_text: 'Op basis van uw profiel kan Smart Cuisine uw keukenoperatie direct optimaliseren.',
            btn_cta: 'Neem contact op', btn_restart: 'Assessment opnieuw doen',
            res_excellent_title: 'Uitstekend – Uw keuken draait op hoog niveau',
            res_excellent_text: 'Uw keukenoperatie scoort bovengemiddeld. Uw systematiek en teamwerk zijn sterk. Focus op finetuning om naar het absolute topniveau te groeien.',
            res_good_title: 'Goed – Er zijn concrete verbeterpunten',
            res_good_text: 'U heeft een solide basis, maar er liggen kansen om uw {w} te verbeteren. Met gerichte aandacht kunt u significante stappen maken.',
            res_moderate_title: 'Matig – Aanzienlijke optimalisatie mogelijk',
            res_moderate_text: 'Er is ruimte voor verbetering, met name op het gebied van {w}. Professionele begeleiding kan u helpen om snel resultaat te boeken.',
            res_poor_title: 'Aandacht nodig – Professionele begeleiding aanbevolen',
            res_poor_text: 'Uw keukenoperatie heeft op meerdere vlakken aandacht nodig. Een gerichte aanpak op {w} is de eerste stap naar verbetering.',
            fs_fail: 'Verzenden mislukt: '
        },
        en: {
            subtitle_default: 'Kitchen Mirror – Professional Kitchen Assessment',
            subtitle_last: 'Last step', subtitle_result: 'Your result',
            subtitle_step: 'Step {n} of {total}',
            s1_title: 'Discover your kitchen\'s potential',
            s1_desc: 'Answer a few questions about your kitchen operation and receive your Kitchen Mirror Score with actionable improvement points.',
            s1_btn: 'Start Assessment',
            s2_title: 'Your details',
            lbl_bedrijf: 'Company name', lbl_contact: 'Contact person',
            lbl_telefoon: 'Phone number', lbl_plaats: 'City',
            ph_bedrijf: 'E.g. Restaurant The Golden Lion', ph_contact: 'Your name',
            ph_telefoon: '+31 6 12345678', ph_plaats: 'Amsterdam',
            err_naw: 'Please fill in all fields to continue.', btn_volgende: 'Next',
            s3_title: 'What type of restaurant do you have?',
            type_eetcafe: 'Pub restaurant', type_brasserie: 'Brasserie',
            type_alacarte: 'Restaurant (à la carte)',
            type_finedining: 'Fine dining / gastronomic',
            type_afhaal: 'Takeaway & delivery restaurant', type_fastfood: 'Fast food / QSR',
            type_internationaal: 'International / theme restaurant',
            type_lunchroom: 'Lunchroom / coffee shop', type_grandcafe: 'Grand café',
            type_hotel: 'Hotel restaurant', type_anders: 'Other',
            ph_anders: 'Specify your restaurant type...',
            s4_title: 'Breakfast – Service moments', s5_title: 'Lunch – Service moments',
            s6_title: 'Dinner – Service moments',
            s4_desc: 'Fill in the details about your breakfast service.',
            s5_desc: 'Fill in the details about your lunch service.',
            s6_desc: 'Fill in the details about your dinner service.',
            lbl_dagen: 'Days per week', lbl_gasten: 'Guests per day',
            lbl_omzet_gast: 'Revenue per guest (€)',
            ph_dagen: '0-7', ph_gasten: 'Avg.', ph_omzet: 'Incl. VAT',
            err_meal: 'Please fill in all fields to continue.',
            skip_ontbijt: 'We don\'t serve breakfast – skip',
            skip_lunch: 'We don\'t serve lunch – skip',
            skip_diner: 'We don\'t serve dinner – skip',
            s7_title: 'What do you offer for breakfast?',
            ontbijt_buffet: 'Breakfast buffet', ontbijt_fixed: 'Fixed breakfast',
            ontbijt_alacarte: 'À la carte breakfast',
            s8_title: 'Menu – Lunch & Dinner',
            s8_desc: 'Indicate your menu composition.',
            lbl_lunch_header: 'LUNCH', lbl_diner_header: 'DINNER',
            lbl_banqueting_header: 'BANQUETING',
            lbl_gerechten: 'Number of à la carte dishes',
            lbl_gangen_lunch: 'Number of lunch menu courses',
            lbl_gangen_diner: 'Number of dinner menu courses',
            lbl_banqueting: 'Number of banqueting menus',
            err_aanbod: 'Please fill in all fields to continue.',
            s9_title: 'Insight into variable costs',
            lbl_brutomarge: 'Avg. gross margin kitchen product (%)',
            lbl_koks: 'Number of chefs (FTE)',
            lbl_loonsom: 'Total kitchen payroll per year (€)',
            lbl_foodomzet: 'Total food revenue per year (€)',
            lbl_inkoop: 'Food purchase value per year (€)',
            lbl_leveranciers: 'Number of suppliers', lbl_leveringen: 'Deliveries per week',
            ph_marge: 'E.g. 70', ph_koks: 'E.g. 3', ph_loonsom: 'E.g. 150000',
            ph_foodomzet: 'E.g. 500000', ph_inkoop: 'E.g. 150000',
            ph_leveranciers: 'E.g. 8', ph_leveringen: 'E.g. 5',
            err_kosten: 'Please fill in all fields to continue.',
            s10_title: 'Systems & Procedures',
            s10_desc: 'Which of the following do you have in place?',
            chk_recepturen: 'Recipes documented',
            chk_gecalculeerd: 'All dishes are costed',
            chk_miseenplace: 'Mise en place planned based on forecast',
            chk_haccp: 'HACCP plan or digital system in place',
            chk_kassasysteem: 'Integrated F&B POS system',
            s11_title: 'Guest satisfaction',
            s11_desc: 'Rate the following aspects on a scale of 1 to 10.',
            lbl_kwaliteit: 'Quality of dishes',
            lbl_continuiteit: 'Consistency of the offering',
            lbl_keuze: 'Choice of menu items', lbl_snelheid: 'Speed of service',
            s12_title: 'Kitchen team',
            lbl_teamtevredenheid: 'Kitchen team satisfaction',
            lbl_samenwerking: 'Kitchen & front-of-house cooperation',
            lbl_gastkennis: 'Knowledge of guest preferences',
            lbl_dienstverband: 'How long do chefs stay on average?',
            dv_6m: 'Less than 6 months', dv_12m: '6 – 12 months',
            dv_2j: '1 – 2 years', dv_2jplus: 'More than 2 years',
            err_team: 'Select how long chefs stay on average.',
            s13_title: 'Where should we send your report?',
            s13_desc: 'Enter your email address to receive your Kitchen Mirror Score.',
            ph_email: 'name@company.com', err_email: 'Please enter a valid email address.',
            btn_submit: 'View my results',
            btn_sending: 'Sending...', btn_analyzing: 'Analyzing...',
            lbl_systematiek: 'Systems', lbl_gasttevredenheid: 'Guest satisfaction',
            lbl_keukenteam: 'Kitchen team', lbl_efficiency: 'Efficiency',
            upsell_header: 'Recommendation',
            upsell_text: 'Based on your profile, Smart Cuisine can immediately optimize your kitchen operation.',
            btn_cta: 'Get in touch', btn_restart: 'Retake assessment',
            res_excellent_title: 'Excellent – Your kitchen performs at a high level',
            res_excellent_text: 'Your kitchen operation scores above average. Your systems and teamwork are strong. Focus on fine-tuning to reach the absolute top level.',
            res_good_title: 'Good – There are concrete areas for improvement',
            res_good_text: 'You have a solid foundation, but there are opportunities to improve your {w}. With focused attention you can make significant progress.',
            res_moderate_title: 'Moderate – Significant optimization possible',
            res_moderate_text: 'There is room for improvement, particularly in {w}. Professional guidance can help you achieve results quickly.',
            res_poor_title: 'Attention needed – Professional guidance recommended',
            res_poor_text: 'Your kitchen operation needs attention in multiple areas. A targeted approach to {w} is the first step toward improvement.',
            fs_fail: 'Submission failed: '
        }
    };

    const progressBar = document.getElementById('progressBar');
    const stepSubtitle = document.getElementById('stepSubtitle');

    /* ======== NAVIGATIE ======== */
    function goNext() {
        var next = currentStep + 1;
        if (next > TOTAL_STEPS) return;

        // Smart skip: stap 7 overslaan als geen ontbijt
        if (next === 7 && !data.ontbijt.active) {
            next = 8;
        }

        transitionTo(next);
    }

    function transitionTo(targetStep) {
        var cur = document.getElementById('step-' + currentStep);
        cur.classList.remove('active');
        cur.classList.add('fade-out');

        setTimeout(function() {
            cur.classList.remove('fade-out');
            currentStep = targetStep;
            var next = document.getElementById('step-' + currentStep);
            next.classList.add('active');
            updateHeader();
            updateProgress();
        }, 300);
    }

    function updateHeader() {
        var t = T[currentLang];
        stepSubtitle.classList.remove('hidden');
        if (currentStep === 1) {
            stepSubtitle.textContent = t.subtitle_default;
        } else if (currentStep === 13) {
            stepSubtitle.textContent = t.subtitle_last;
        } else if (currentStep === 14) {
            stepSubtitle.textContent = t.subtitle_result;
        } else {
            stepSubtitle.textContent = t.subtitle_step.replace('{n}', currentStep - 1).replace('{total}', TOTAL_STEPS - 2);
        }
    }

    /* ======== TAAL / LANGUAGE ======== */
    function setLang(lang) {
        currentLang = lang;
        document.getElementById('langNL').classList.toggle('active', lang === 'nl');
        document.getElementById('langEN').classList.toggle('active', lang === 'en');
        document.documentElement.lang = lang;
        applyTranslations();
    }

    function applyTranslations() {
        var t = T[currentLang];
        document.querySelectorAll('[data-t]').forEach(function(el) {
            var key = el.getAttribute('data-t');
            if (t[key] !== undefined) el.textContent = t[key];
        });
        document.querySelectorAll('[data-ph]').forEach(function(el) {
            var key = el.getAttribute('data-ph');
            if (t[key] !== undefined) el.placeholder = t[key];
        });
        updateHeader();
        if (currentStep === 14 && lastScores) showResults(lastScores);
    }

    function updateProgress() {
        var pct = currentStep === 1 ? 5 : Math.round((currentStep / TOTAL_STEPS) * 100);
        progressBar.style.width = pct + '%';
    }

    /* ======== STAP 2: NAW ======== */
    function submitNaw() {
        var bedrijf = document.getElementById('nawBedrijf').value.trim();
        var contact = document.getElementById('nawContact').value.trim();
        var telefoon = document.getElementById('nawTelefoon').value.trim();
        var plaats = document.getElementById('nawPlaats').value.trim();
        var nawError = document.getElementById('nawError');

        if (!bedrijf || !contact || !telefoon || !plaats) {
            nawError.style.display = 'block';
            // Highlight empty fields
            document.getElementById('nawBedrijf').style.borderColor = bedrijf ? 'var(--glass-border)' : '#ef4444';
            document.getElementById('nawContact').style.borderColor = contact ? 'var(--glass-border)' : '#ef4444';
            document.getElementById('nawTelefoon').style.borderColor = telefoon ? 'var(--glass-border)' : '#ef4444';
            document.getElementById('nawPlaats').style.borderColor = plaats ? 'var(--glass-border)' : '#ef4444';
            return;
        }
        nawError.style.display = 'none';
        document.getElementById('nawBedrijf').style.borderColor = 'var(--glass-border)';
        document.getElementById('nawContact').style.borderColor = 'var(--glass-border)';
        document.getElementById('nawTelefoon').style.borderColor = 'var(--glass-border)';
        document.getElementById('nawPlaats').style.borderColor = 'var(--glass-border)';
        data.bedrijf = bedrijf;
        data.contact = contact;
        data.telefoon = telefoon;
        data.plaats = plaats;
        goNext();
    }

    /* ======== STAP 3: TYPE (+ Anders) ======== */
    function pickOption(field, value) {
        data[field] = value;
        goNext();
    }

    function showOther(field) {
        document.getElementById('other' + capitalize(field)).classList.remove('hidden');
        document.getElementById('other' + capitalize(field) + 'Input').focus();
    }

    function confirmOther(field) {
        var val = document.getElementById('other' + capitalize(field) + 'Input').value.trim();
        if (!val) return;
        data[field] = val;
        goNext();
    }

    function capitalize(s) { return s.charAt(0).toUpperCase() + s.slice(1); }

    /* ======== VALIDATIE HELPER ======== */
    function validateFields(ids, errorId) {
        var valid = true;
        ids.forEach(function(id) {
            var el = document.getElementById(id);
            if (el.value === '') {
                el.style.borderColor = '#ef4444';
                valid = false;
            } else {
                el.style.borderColor = 'var(--glass-border)';
            }
        });
        var err = document.getElementById(errorId);
        if (err) err.style.display = valid ? 'none' : 'block';
        return valid;
    }

    /* ======== STAP 4-6: SERVEERMOMENTEN ======== */
    function submitMeal(meal) {
        var ids = [meal + 'Dagen', meal + 'Gasten', meal + 'Omzet'];
        if (!validateFields(ids, meal + 'Error')) return;

        var dagen = parseInt(document.getElementById(meal + 'Dagen').value) || 0;
        var gasten = parseInt(document.getElementById(meal + 'Gasten').value) || 0;
        var omzet = parseFloat(document.getElementById(meal + 'Omzet').value) || 0;
        data[meal] = { active: dagen > 0, dagen: dagen, gasten: gasten, omzet: omzet };
        goNext();
    }

    function skipMeal(meal) {
        data[meal] = { active: false, dagen: 0, gasten: 0, omzet: 0 };
        goNext();
    }

    /* ======== STAP 8: AANBOD ======== */
    function submitAanbod() {
        var ids = ['lunchGerechten', 'lunchGangen', 'dinerGerechten', 'dinerGangen', 'banqueting'];
        if (!validateFields(ids, 'aanbodError')) return;
        goNext();
    }

    /* ======== STAP 9: KOSTEN ======== */
    function submitKosten() {
        var ids = ['brutomarge', 'aantalKoks', 'loonsom', 'foodomzet', 'inkoop', 'leveranciers', 'leveringen'];
        if (!validateFields(ids, 'kostenError')) return;
        goNext();
    }

    /* ======== STAP 10: CHECKBOXES ======== */
    function toggleCheck(btn, key) {
        btn.classList.toggle('checked');
        data.systematiek[key] = btn.classList.contains('checked');
    }

    /* ======== STAP 11-12: SLIDERS ======== */
    function updateSlider(key, val) {
        document.getElementById('val-' + key).innerText = val;
        data[key] = parseInt(val);
    }

    /* ======== STAP 12: DIENSTVERBAND ======== */
    function pickDienstverband(val, btn) {
        btn.parentElement.querySelectorAll('.option-btn').forEach(function(b) {
            b.classList.remove('selected');
        });
        btn.classList.add('selected');
        data.dienstverband = val;
        document.getElementById('teamError').style.display = 'none';
    }

    function submitTeam() {
        if (!data.dienstverband) {
            document.getElementById('teamError').style.display = 'block';
            return;
        }
        goNext();
    }

    /* ======== STAP 13: EMAIL & SUBMIT ======== */
    async function submitEmail() {
        var emailInput = document.getElementById('emailInput');
        var emailError = document.getElementById('emailError');
        var submitBtn = document.getElementById('submitBtn');
        var email = emailInput.value.trim();

        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
            emailError.style.display = 'block';
            emailInput.style.borderColor = '#ef4444';
            return;
        }

        emailError.style.display = 'none';
        emailInput.style.borderColor = 'var(--glass-border)';
        data.email = email;

        // Collect remaining input fields
        data.lunchGerechten = parseInt(document.getElementById('lunchGerechten').value) || 0;
        data.lunchGangen = parseInt(document.getElementById('lunchGangen').value) || 0;
        data.dinerGerechten = parseInt(document.getElementById('dinerGerechten').value) || 0;
        data.dinerGangen = parseInt(document.getElementById('dinerGangen').value) || 0;
        data.banqueting = parseInt(document.getElementById('banqueting').value) || 0;
        data.brutomarge = parseFloat(document.getElementById('brutomarge').value) || 0;
        data.aantalKoks = parseFloat(document.getElementById('aantalKoks').value) || 0;
        data.loonsom = parseFloat(document.getElementById('loonsom').value) || 0;
        data.foodomzet = parseFloat(document.getElementById('foodomzet').value) || 0;
        data.inkoop = parseFloat(document.getElementById('inkoop').value) || 0;
        data.leveranciers = parseInt(document.getElementById('leveranciers').value) || 0;
        data.leveringen = parseInt(document.getElementById('leveringen').value) || 0;

        // Loading state
        submitBtn.disabled = true;
        submitBtn.textContent = '';
        var sp = document.createElement('span'); sp.className = 'spinner';
        submitBtn.appendChild(sp);
        submitBtn.appendChild(document.createTextNode(' ' + T[currentLang].btn_sending));

        // Calculate scores
        var scores = calculateScores();

        // Build form data
        var fd = new FormData();
        fd.append('email', data.email);
        fd.append('_subject', 'Keukenspiegel – ' + data.bedrijf);
        fd.append('bedrijf', data.bedrijf);
        fd.append('contactpersoon', data.contact);
        fd.append('telefoon', data.telefoon);
        fd.append('plaats', data.plaats);
        fd.append('type_restaurant', data.type);
        fd.append('totaalscore', scores.total);
        fd.append('message',
            'Bedrijf: ' + data.bedrijf +
            '\nContact: ' + data.contact +
            '\nTelefoon: ' + data.telefoon +
            '\nPlaats: ' + data.plaats +
            '\nType: ' + data.type +
            '\n\nOntbijt: ' + (data.ontbijt.active ? data.ontbijt.dagen + ' dagen, ' + data.ontbijt.gasten + ' gasten, €' + data.ontbijt.omzet + '/gast' : 'Niet van toepassing') +
            '\nLunch: ' + (data.lunch.active ? data.lunch.dagen + ' dagen, ' + data.lunch.gasten + ' gasten, €' + data.lunch.omzet + '/gast' : 'Niet van toepassing') +
            '\nDiner: ' + (data.diner.active ? data.diner.dagen + ' dagen, ' + data.diner.gasten + ' gasten, €' + data.diner.omzet + '/gast' : 'Niet van toepassing') +
            '\n\nOntbijt type: ' + (data.ontbijtType || 'N/A') +
            '\nLunch gerechten: ' + data.lunchGerechten + ', gangen: ' + data.lunchGangen +
            '\nDiner gerechten: ' + data.dinerGerechten + ', gangen: ' + data.dinerGangen +
            '\nBanqueting: ' + data.banqueting +
            '\n\nBrutomarge: ' + data.brutomarge + '%' +
            '\nAantal koks: ' + data.aantalKoks + ' FTE' +
            '\nLoonsom: €' + data.loonsom +
            '\nFoodomzet: €' + data.foodomzet +
            '\nInkoop: €' + data.inkoop +
            '\nLeveranciers: ' + data.leveranciers +
            '\nLeveringen/week: ' + data.leveringen +
            '\n\nSystematiek: ' + Object.entries(data.systematiek).filter(function(e){return e[1]}).map(function(e){return e[0]}).join(', ') +
            '\n\nGasttevredenheid:' +
            '\n  Kwaliteit: ' + data.kwaliteit +
            '\n  Continuïteit: ' + data.continuiteit +
            '\n  Keuze: ' + data.keuze +
            '\n  Snelheid: ' + data.snelheid +
            '\n\nKeukenteam:' +
            '\n  Tevredenheid: ' + data.teamtevredenheid +
            '\n  Samenwerking: ' + data.samenwerking +
            '\n  Gastkennis: ' + data.gastkennis +
            '\n  Dienstverband: ' + data.dienstverband +
            '\n\nSCORES:' +
            '\n  Systematiek: ' + scores.systematiek + '/25' +
            '\n  Gasttevredenheid: ' + scores.gasttevredenheid + '/25' +
            '\n  Keukenteam: ' + scores.keukenteam + '/25' +
            '\n  Efficiency: ' + scores.efficiency + '/25' +
            '\n  TOTAAL: ' + scores.total + '/100'
        );

        try {
            var response = await fetch('https://formspree.io/f/' + FORMSPREE_ID, {
                method: 'POST', body: fd, headers: { 'Accept': 'application/json' }
            });

            if (response.ok) {
                submitBtn.textContent = T[currentLang].btn_analyzing;
                setTimeout(function() {
                    goNext();
                    showResults(scores);
                }, 800);
            } else {
                throw new Error('Server fout (' + response.status + ')');
            }
        } catch (err) {
            submitBtn.disabled = false;
            submitBtn.textContent = T[currentLang].btn_submit;
            emailError.style.display = 'block';
            emailError.textContent = T[currentLang].fs_fail + err.message;
        }
    }

    /* ======== SCORING ======== */
    function calculateScores() {
        // Systematiek: 5 punten per aangevinkt item (max 25)
        var sysCount = Object.values(data.systematiek).filter(Boolean).length;
        var systematiek = sysCount * 5;

        // Gasttevredenheid: gemiddelde * 2.5 (max 25)
        var gastAvg = (data.kwaliteit + data.continuiteit + data.keuze + data.snelheid) / 4;
        var gasttevredenheid = Math.round(gastAvg * 2.5);

        // Keukenteam: gemiddelde * 2 + dienstverband bonus (max 25)
        var teamAvg = (data.teamtevredenheid + data.samenwerking + data.gastkennis) / 3;
        var dienstBonus = 0;
        if (data.dienstverband === '> 2 jaar') dienstBonus = 5;
        else if (data.dienstverband === '1-2 jaar') dienstBonus = 3;
        else if (data.dienstverband === '6-12 maanden') dienstBonus = 1;
        var keukenteam = Math.min(25, Math.round(teamAvg * 2) + dienstBonus);

        // Efficiency: brutomarge + kosten ratio (max 25)
        var effMarge = 0;
        if (data.brutomarge >= 70) effMarge = 12;
        else if (data.brutomarge >= 60) effMarge = 9;
        else if (data.brutomarge >= 50) effMarge = 6;
        else if (data.brutomarge > 0) effMarge = 3;

        var effKosten = 0;
        if (data.foodomzet > 0) {
            var ratio = data.loonsom / data.foodomzet;
            if (ratio <= 0.25) effKosten = 13;
            else if (ratio <= 0.30) effKosten = 10;
            else if (ratio <= 0.40) effKosten = 7;
            else if (ratio <= 0.50) effKosten = 4;
            else effKosten = 2;
        } else {
            effKosten = 6; // geen data = neutrale score
        }
        var efficiency = Math.min(25, effMarge + effKosten);

        var total = systematiek + gasttevredenheid + keukenteam + efficiency;

        return { systematiek, gasttevredenheid, keukenteam, efficiency, total };
    }

    /* ======== RESULTATEN TONEN ======== */
    function showResults(scores) {
        lastScores = scores;
        var t = T[currentLang];

        // Animeer totaalscore
        var scoreEl = document.getElementById('scoreValue');
        var count = 0;
        var interval = setInterval(function() {
            if (count >= scores.total) { clearInterval(interval); }
            else { count++; scoreEl.textContent = count; }
        }, 20);

        // Breakdown bars
        setTimeout(function() {
            showBar('systematiek', scores.systematiek, 25);
            showBar('gasttevredenheid', scores.gasttevredenheid, 25);
            showBar('keukenteam', scores.keukenteam, 25);
            showBar('efficiency', scores.efficiency, 25);
        }, 500);

        // Titel & tekst
        var titleEl = document.getElementById('resultTitle');
        var textEl = document.getElementById('resultText');
        var w = getWeakest(scores);

        if (scores.total >= 80) {
            titleEl.textContent = t.res_excellent_title;
            textEl.textContent = t.res_excellent_text;
        } else if (scores.total >= 60) {
            titleEl.textContent = t.res_good_title;
            textEl.textContent = t.res_good_text.replace('{w}', w);
        } else if (scores.total >= 40) {
            titleEl.textContent = t.res_moderate_title;
            textEl.textContent = t.res_moderate_text.replace('{w}', w);
        } else {
            titleEl.textContent = t.res_poor_title;
            textEl.textContent = t.res_poor_text.replace('{w}', w);
        }
    }

    function showBar(id, value, max) {
        var pct = Math.round((value / max) * 100);
        document.getElementById('bar-' + id).style.width = pct + '%';
        document.getElementById('val-bar-' + id).innerText = value + '/' + max;
    }

    function getWeakest(scores) {
        var t = T[currentLang];
        var items = [
            { name: t.lbl_systematiek, score: scores.systematiek },
            { name: t.lbl_gasttevredenheid, score: scores.gasttevredenheid },
            { name: t.lbl_keukenteam, score: scores.keukenteam },
            { name: t.lbl_efficiency, score: scores.efficiency }
        ];
        items.sort(function(a, b) { return a.score - b.score; });
        return items[0].name;
    }

    // Init progress
    updateProgress();
</script>
</body>
</html>
